<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Car Game</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      .hide {
        display: none;
      }

      .car {
        width: 50px;
        height: 100px;
        background-color: red;
        position: absolute;
        bottom: 120px;
        left: 50px;
        z-index: 2;
        position: absolute;
        
      }

      /* game area road */
      .gameArea {
        width: 400px;
        height: 100vh;
        background: #2d3436;
        margin: auto;
        position: relative;
        overflow: hidden;
      }
      .lines{
        width: 10px;
        height: 100px;
        background: white;
        position: absolute;
        left: 195px;
      }
    </style>
  </head>

  <body>
    <div class="carGame">
      <div class="score"></div>
      <div class="startScreen">
        <p>
          Press here to start<br />
          Arrow keys to move <br />
          If you hit another car you lose
        </p>
      </div>
      <div class="gameArea hide"></div>
    </div>

    <script>
      const score = document.querySelector(".score");
      const startScreen = document.querySelector(".startScreen");
      const gameArea = document.querySelector(".gameArea");
      console.log(score);

      //Screen ko start karay ka function
      startScreen.addEventListener("click", start);

      //check player is ready
      let player = { speed: 5, score: 0 };

      //hamin car play karny valu keys ko use karna hay
      let keys = {
        ArrowUp: false,
        ArrowDown: false,
        ArrowLeft: false,
        ArrowRight: false,
      }; //sab ko false kar dia ab jo true ho ga vo kam karay ga

      document.addEventListener("keydown", keyDown); //ya ak event lata hay aur ya to callback do ya function ka name ya function to ham nay name dia

      document.addEventListener("keyup", keyUp);

      //kon si key down hoi aus ko dakhin gay
      function keyDown(e) {
        e.preventDefault();
        keys[e.key] = true;
        console.log(e.key);
        console.log(keys);
      }

      function keyUp(e) {
        e.preventDefault();
        keys[e.key] = false; //ab ak ap press karo gay to vo true ho jay gi jasay relese ho gi phir false ho jay gi to sary true nahi hon gay
        console.log(e.key);
      }

      function gamePlay() {
        //console.log("hello");

        //NOTE hamaray road ki yani gamearea ki div ki sari side ki values baty ga top kitna hay ,left y,x all ya method bhot important hay 

        let road  = gameArea.getBoundingClientRect(); 
        console.log(road);

        let car = document.querySelector(".car");

        if (player.start) {
          //NOTE ya sath may validation lagai kay car bhar na jay sab pay lagai hay 
          if (keys.ArrowUp && player.y > (road.top + 70)) { //ais say ya ho ga pura top pay nahi jay ga to ham cars dakh pain gay anny vali 

            player.y -= player.speed;
          } // to user up key press kary to -5 ho offset say
          if (keys.ArrowDown && player.y < (road.height - car.offsetHeight)) {
            player.y += player.speed;
          }
          if (keys.ArrowLeft && player.x > 0) {
            player.x -= player.speed;
          }
          if (keys.ArrowRight && player.x < (road.width - car.offsetWidth) ) {
            player.x += player.speed;
          }

          car.style.top = player.y + "px"; 
          //NOTE px ais liay likha kay jo value hay aus kay sath px nahi aya to kam nahi karay ga
          car.style.left = player.x + "px"; //to move car in x axis
          //ham nay dakha tha kay top aur left lay lo khud hi bottom aur right a jay ga Q kay top ko - karo bottom left ko - karo to right done

          window.requestAnimationFrame(gamePlay); //ya same ais may dalny say jasay click karin gay to bar bar same cheez chaly gi
        }
      }

      //start function startScreen may call kia hay yaha bana rahy hain aus ko
      function start() {
        gameArea.classList.remove("hide"); //ya game area ko remove karay ga
        startScreen.classList.add("hide"); //ya ham nay startScreen may hide class laga di hay
        player.start = true;
        window.requestAnimationFrame(gamePlay); //ya jo requestAnimationfram hay ya ak hi animation ko bar bar chaly ga ais ka kam ya hay ais may ham nay ak new function day dia playGame ab aus ko banin gay


        //ya ham nay road ki lines bana li lakin abhi aus ko css nahi di vo bhi datay hain lakin js say bani hay ya 
        for(let x = 0; x < 5; x++) {
          let roadLines = document.createElement('div');
          roadLines.setAttribute('class', 'lines');
          roadLines.style.top = (x * 150) + 'px';
          gameArea.appendChild(roadLines);
        }
        //cars banay ka code
        let car = document.createElement("dive"); //ak div create kar li
        car.setAttribute("class", "car"); //ak div ko class add kar li
        //car.innerText = 'ðŸš—'; //ak div ko text add kar li
        gameArea.appendChild(car); //area vali div may car vali div ko add kar dia

        player.x = car.offsetLeft; //ya ham nay ak hi var ko 2 may change kar dia kay x left
        player.y = car.offsetTop; //y say ham nay top kar dia ab direct value ko chagne karna ho ga

        //ya ham nay kia Q kay ais say pata chala kay ager offsettop use karin gay to top ki value vo ho jay gi to hamin move karna hay to ham ais may ya to value add karin gay ya -ve karin gay to ya move hoti nazar ay gi
        console.log("Top" + car.offsetTop);
        console.log("Left" + car.offsetLeft);
      }
    </script>
  </body>
</html>
